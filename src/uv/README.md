# UV Python Environment Feature

This devcontainer feature installs [`uv`](https://github.com/astral-sh/uv) using the official installer script.

## What it does

- Installs `uv` from [astral.sh](https://astral.sh/uv/)


## Usage

Add to your `devcontainer.json`:

```json
{
    "features": {
        "ghcr.io/draperez/devcontainers/uv": {}
    }
}
```

You can now use `uv` in your devcontainer.

### Options

#### `installationMethod`

You can specify the installation method for `uv` using the `installationMethod` option. Supported values:

- `auto` (default): Automatically selects the best installation method.
- `pipx`: Installs `uv` using pipx.
- `script`: Installs `uv` using the official installer script from astral.sh.

Example:

```json
{
    "features": {
        "ghcr.io/draperez/devcontainers/uv": {
            "installationMethod": "pipx"
        }
    }
}
```

> **Note:** This feature does not set up environment variables, VS Code settings, or lifecycle commands. It only installs `uv`.

A more advanced recommendation is to use the `uv` command in your `postCreateCommand` and `postStartCommand` and set the `UV_PROJECT_ENVIRONMENT` environment variable to specify where the virtual environment should be created. This allows you to manage your Python environments more effectively:

```json
{
    "features": {
        "ghcr.io/draperez/devcontainers/uv": {
            "installationMethod": "script"
        }
    },
    "containerEnv": {
        "UV_PROJECT_ENVIRONMENT": "/tmp/venv" // This creates the virtual environment outside the workspace
    },
    "postCreateCommand": "uv venv --clear",  // This creates a new virtual environment
    "postStartCommand": "uv sync --extra dev" // This ensures the virtual environment is up to date
}
```


## Testing the features:

Example for testing UV feature:

```bash
devcontainer features test --features uv --skip-autogenerated
```

This will run all the scenario tests located in the `test/uv` folder. (see [scenarios.json](../../test/uv/scenarios.json))
